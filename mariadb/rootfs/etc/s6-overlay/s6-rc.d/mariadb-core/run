#!/command/with-contenv bashio
# shellcheck shell=bash
# ==============================================================================
# Start MariaDB service
# ==============================================================================

if bashio::config.has_value "mariadb_server_args"; then
  extra_args+=($(bashio::config 'mariadb_server_args'))
  bashio::log.info "Starting MariaDB with command line parameters: ${extra_args[@]}"
fi

# Start mariadb
bashio::log.info "Starting MariaDB with command line parameters: ${extra_args[@]}"
mkdir -p /run/mysqld
exec mysqld --datadir="${MARIADB_DATA}" --user=root "${extra_args[@]}" < /dev/null
